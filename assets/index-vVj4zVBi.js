import{_ as Q}from"./ContentLayout-0EYTWc5r.js";import{l as X,d as N,m as O,b as q,n as Y,e as z,g as Z,t as R,p as M,h as m,q as ee,s as te,B as P,N as oe,W as ne,c as F,a as S,v as I,u as E,x as se,y as h,z as ae,A as le,C as re,D as ie,F as ue,G as $,o as b,H as ce,J as K,K as y,L as T,i as U,w as u,j as s,M as de,k,O as j,P as pe,Q as D,R as L,T as me,U as V,V as ve}from"./index-4_JkqOaq.js";import{_ as B}from"./Space-6QgMfiDm.js";import{N as J}from"./Modal-B4OwYCvV.js";import{_ as fe}from"./DataTable-DmJZvFZY.js";import"./Tag-DmRPqP8o.js";const H=X("n-popconfirm"),W={positiveText:String,negativeText:String,showIcon:{type:Boolean,default:!0},onPositiveClick:{type:Function,required:!0},onNegativeClick:{type:Function,required:!0}},A=te(W),_e=N({name:"NPopconfirmPanel",props:W,setup(a){const{localeRef:o}=O("Popconfirm"),{inlineThemeDisabled:l}=q(),{mergedClsPrefixRef:t,mergedThemeRef:_,props:p}=Y(H),g=z(()=>{const{common:{cubicBezierEaseInOut:e},self:{fontSize:n,iconSize:c,iconColor:v}}=_.value;return{"--n-bezier":e,"--n-font-size":n,"--n-icon-size":c,"--n-icon-color":v}}),r=l?Z("popconfirm-panel",void 0,g,p):void 0;return Object.assign(Object.assign({},O("Popconfirm")),{mergedClsPrefix:t,cssVars:l?void 0:g,localizedPositiveText:z(()=>a.positiveText||o.value.positiveText),localizedNegativeText:z(()=>a.negativeText||o.value.negativeText),positiveButtonProps:R(p,"positiveButtonProps"),negativeButtonProps:R(p,"negativeButtonProps"),handlePositiveClick(e){a.onPositiveClick(e)},handleNegativeClick(e){a.onNegativeClick(e)},themeClass:r==null?void 0:r.themeClass,onRender:r==null?void 0:r.onRender})},render(){var a;const{mergedClsPrefix:o,showIcon:l,$slots:t}=this,_=M(t.action,()=>this.negativeText===null&&this.positiveText===null?[]:[this.negativeText!==null&&m(P,Object.assign({size:"small",onClick:this.handleNegativeClick},this.negativeButtonProps),{default:()=>this.localizedNegativeText}),this.positiveText!==null&&m(P,Object.assign({size:"small",type:"primary",onClick:this.handlePositiveClick},this.positiveButtonProps),{default:()=>this.localizedPositiveText})]);return(a=this.onRender)===null||a===void 0||a.call(this),m("div",{class:[`${o}-popconfirm__panel`,this.themeClass],style:this.cssVars},ee(t.default,p=>l||p?m("div",{class:`${o}-popconfirm__body`},l?m("div",{class:`${o}-popconfirm__icon`},M(t.icon,()=>[m(oe,{clsPrefix:o},{default:()=>m(ne,null)})])):null,p):null),_?m("div",{class:[`${o}-popconfirm__action`]},_):null)}}),ge=F("popconfirm",[S("body",`
 font-size: var(--n-font-size);
 display: flex;
 align-items: center;
 flex-wrap: nowrap;
 position: relative;
 `,[S("icon",`
 display: flex;
 font-size: var(--n-icon-size);
 color: var(--n-icon-color);
 transition: color .3s var(--n-bezier);
 margin: 0 8px 0 0;
 `)]),S("action",`
 display: flex;
 justify-content: flex-end;
 `,[I("&:not(:first-child)","margin-top: 8px"),F("button",[I("&:not(:last-child)","margin-right: 8px;")])])]),he=Object.assign(Object.assign(Object.assign({},E.props),ue),{positiveText:String,negativeText:String,showIcon:{type:Boolean,default:!0},trigger:{type:String,default:"click"},positiveButtonProps:Object,negativeButtonProps:Object,onPositiveClick:Function,onNegativeClick:Function}),we=N({name:"Popconfirm",props:he,__popover__:!0,setup(a){const{mergedClsPrefixRef:o}=q(),l=E("Popconfirm","-popconfirm",ge,se,a,o),t=h(null);function _(r){var e;if(!(!((e=t.value)===null||e===void 0)&&e.getMergedShow()))return;const{onPositiveClick:n,"onUpdate:show":c}=a;Promise.resolve(n?n(r):!0).then(v=>{var f;v!==!1&&((f=t.value)===null||f===void 0||f.setShow(!1),c&&$(c,!1))})}function p(r){var e;if(!(!((e=t.value)===null||e===void 0)&&e.getMergedShow()))return;const{onNegativeClick:n,"onUpdate:show":c}=a;Promise.resolve(n?n(r):!0).then(v=>{var f;v!==!1&&((f=t.value)===null||f===void 0||f.setShow(!1),c&&$(c,!1))})}return ae(H,{mergedThemeRef:l,mergedClsPrefixRef:o,props:a}),{setShow(r){var e;(e=t.value)===null||e===void 0||e.setShow(r)},syncPosition(){var r;(r=t.value)===null||r===void 0||r.syncPosition()},mergedTheme:l,popoverInstRef:t,handlePositiveClick:_,handleNegativeClick:p}},render(){const{$slots:a,$props:o,mergedTheme:l}=this;return m(ie,re(o,A,{theme:l.peers.Popover,themeOverrides:l.peerOverrides.Popover,internalExtraClass:["popconfirm"],ref:"popoverInstRef"}),{trigger:a.activator||a.trigger,default:()=>{const t=le(o,A);return m(_e,Object.assign(Object.assign({},t),{onPositiveClick:this.handlePositiveClick,onNegativeClick:this.handleNegativeClick}),a)}})}}),Pe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ke=K("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 112v288"},null,-1),Ce=K("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M400 256H112"},null,-1),ye=[ke,Ce],be=N({name:"AddOutline",render:function(o,l){return b(),ce("svg",Pe,ye)}}),xe={__name:"AccountFilter",props:y(["filter"],{modelValue:{},modelModifiers:{}}),emits:y(["apply","reset","updateFilter"],["update:modelValue"]),setup(a,{emit:o}){const l=T(a,"modelValue"),t=a,_=o,p=()=>{l.value="",_("updateFilter",{account:null}),t.filter.hide()},g=()=>{_("updateFilter",{account:l.value}),t.filter.hide()};return(r,e)=>{const n=j,c=P,v=pe;return b(),U(v,{vertical:"",style:{padding:"0.5rem"}},{default:u(()=>[s(n,{value:l.value,"onUpdate:value":e[0]||(e[0]=f=>l.value=f),size:"small",placeholder:"Search Account",onKeyup:de(g,["enter"])},null,8,["value"]),s(v,{justify:"space-between"},{default:u(()=>[s(c,{size:"small",onClick:p},{default:u(()=>e[1]||(e[1]=[k("reset")])),_:1}),s(c,{size:"small",type:"primary",onClick:g},{default:u(()=>e[2]||(e[2]=[k("apply")])),_:1})]),_:1})]),_:1})}}},Ue={__name:"CreateUserModal",props:{show:{default:!1},showModifiers:{}},emits:y(["update:show"],["update:show"]),setup(a){const o=T(a,"show"),l=h(null),t=h({name:"",account:"",password:""}),_={name:{required:!0,message:"Please input name",trigger:"blur"},account:{required:!0,message:"Please input account",trigger:"blur"},password:{required:!0,message:"Please input password",trigger:"blur"}},p=()=>{o.value=!1},g=()=>{l.value.validate(r=>{r||(console.log("Form submitted:",t.value),o.value=!1)})};return(r,e)=>{const n=j,c=D,v=L,f=P,C=B,i=J;return b(),U(i,{show:o.value,"onUpdate:show":e[3]||(e[3]=d=>o.value=d),title:"Create User",preset:"card",style:{width:"400px"}},{footer:u(()=>[s(C,null,{default:u(()=>[s(f,{type:"primary",onClick:g},{default:u(()=>e[4]||(e[4]=[k("Submit")])),_:1}),s(f,{onClick:p},{default:u(()=>e[5]||(e[5]=[k("Cancel")])),_:1})]),_:1})]),default:u(()=>[s(v,{ref_key:"formRef",ref:l,model:t.value,rules:_},{default:u(()=>[s(c,{label:"Name",path:"name"},{default:u(()=>[s(n,{value:t.value.name,"onUpdate:value":e[0]||(e[0]=d=>t.value.name=d)},null,8,["value"])]),_:1}),s(c,{label:"Account",path:"account"},{default:u(()=>[s(n,{value:t.value.account,"onUpdate:value":e[1]||(e[1]=d=>t.value.account=d)},null,8,["value"])]),_:1}),s(c,{label:"Password",path:"password"},{default:u(()=>[s(n,{type:"password","show-password-on":"click",value:t.value.password,"onUpdate:value":e[2]||(e[2]=d=>t.value.password=d)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show"])}}},ze={__name:"EditUserModal",props:y({show:Boolean,user:Object},{show:{default:!1},showModifiers:{}}),emits:y(["update:show"],["update:show"]),setup(a){const o=T(a,"show"),l=h(null),t=h({name:"",account:"",password:""}),_={name:{required:!0,message:"Please input name",trigger:"blur"},account:{required:!0,message:"Please input account",trigger:"blur"},password:{required:!1,message:"Please input password",trigger:"blur"}},p=()=>{o.value=!1},g=()=>{l.value.validate(e=>{e||(console.log("Form submitted:",t.value),o.value=!1)})},r=a;return me(()=>r.user,e=>{e&&(t.value.name=e.name,t.value.account=e.account,t.value.password="")}),(e,n)=>{const c=j,v=D,f=L,C=P,i=B,d=J;return b(),U(d,{show:o.value,"onUpdate:show":n[3]||(n[3]=w=>o.value=w),title:"Edit User",preset:"card",style:{width:"400px"}},{footer:u(()=>[s(i,null,{default:u(()=>[s(C,{type:"primary",onClick:g},{default:u(()=>n[4]||(n[4]=[k("Submit")])),_:1}),s(C,{onClick:p},{default:u(()=>n[5]||(n[5]=[k("Cancel")])),_:1})]),_:1})]),default:u(()=>[s(f,{ref_key:"formRef",ref:l,model:t.value,rules:_},{default:u(()=>[s(v,{label:"Name",path:"name"},{default:u(()=>[s(c,{value:t.value.name,"onUpdate:value":n[0]||(n[0]=w=>t.value.name=w)},null,8,["value"])]),_:1}),s(v,{label:"Account",path:"account"},{default:u(()=>[s(c,{value:t.value.account,"onUpdate:value":n[1]||(n[1]=w=>t.value.account=w)},null,8,["value"])]),_:1}),s(v,{label:"Password",path:"password"},{default:u(()=>[s(c,{type:"password","show-password-on":"click",value:t.value.password,"onUpdate:value":n[2]||(n[2]=w=>t.value.password=w),placeholder:"Enter new password"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show"])}}},Re={__name:"index",setup(a){const o=h(!1),l=h(!1),t=h(null),_=[{label:"User",key:"user"}],p=h({account:"",name:""}),g=[{title:"ID",key:"user_id",sorter:!0},{title:"Name",key:"name",sorter:!0,filter:!0},{title:"Account",key:"account",sorter:!0,filter:"default",renderFilterMenu:i=>m(xe,{filter:i,modelValue:p.value.account,onUpdateFilter:e})},{title:"Created At",key:"created_at"},{title:"Action",key:"action",render:i=>m(B,[m(P,{type:"primary",size:"small",secondary:!0,onClick:()=>f(i)},"Edit"),m(we,{onPositiveClick:()=>C(i)},{default:()=>"Do you confirm deletion?",trigger:()=>m(P,{type:"error",size:"small",secondary:!0},"Delete")})])}],r=h({page:1,pageSize:10,showSizePicker:!0,pageSizes:[10,20,30,50],onChange:i=>{r.value.page=i},onUpdatePageSize:i=>{r.value.pageSize=i,r.value.page=1}}),e=i=>{console.log("filters",i),Object.assign(p.value,i)},n=i=>{console.log("sorter",i)},c=[{user_id:1,name:"John Brown",account:"john",created_at:"2023-06-01 12:00:00",updated_at:"2023-06-01 12:00:00"},{user_id:2,name:"Jim Green",account:"jim",created_at:"2023-06-02 13:00:00",updated_at:"2023-06-02 13:00:00"},{user_id:3,name:"Joe Black",account:"joe",created_at:"2023-06-03 14:00:00",updated_at:"2023-06-03 14:00:00"}];function v(i){return()=>m(ve,null,{default:()=>m(i)})}const f=i=>{t.value=i,l.value=!0,console.log("edit user",i)},C=i=>{console.log("delete user",i)};return(i,d)=>{const w=fe,G=Q;return b(),U(G,{title:"User List",subtitle:"Manage users",breadcrumb:_},{extra:u(()=>[s(V(P),{type:"primary",onClick:d[0]||(d[0]=x=>o.value=!0),"render-icon":v(V(be))},{default:u(()=>d[3]||(d[3]=[k("Create")])),_:1},8,["render-icon"])]),default:u(()=>[s(w,{columns:g,data:c,pagination:r.value,"onUpdate:filters":e,"onUpdate:sorter":n},null,8,["pagination"]),s(Ue,{show:o.value,"onUpdate:show":d[1]||(d[1]=x=>o.value=x)},null,8,["show"]),s(ze,{show:l.value,"onUpdate:show":d[2]||(d[2]=x=>l.value=x),user:t.value},null,8,["show","user"])]),_:1})}}};export{Re as default};
